critical_analysis:
  description: >
    Analise as chunks {chunk_indexes} do batch {batch_number} do documento {target_document} (tema: {theme}). 
    O documento é do tipo <type>'draft'</type>.

    Escreva uma análise crítica sob os textos contidos nas chunks do batch, de pelo menos um parágrafo de comprimento,
    destacando e sinteizando os pontos-chaves e insights, avaliando todo a extensão do conteúdo e contexto fornecido 
    pelas chunks.
  expected_output: >
    Uma análise crítica do conteúdo do batch, escrito em português brasileiro, como um texto coeso de no mínimo um parágrafo, 
    que destaque e sintetize os pontos-chaves e insights. 
  agent: critical_analyst

methodology_analysis:
  description: >
    Analise as chunks {chunk_indexes} do batch {batch_number} do documento {target_document} (tema: {theme}). 
    O documento é do tipo <type>'draft'</type>.
    Faça uma analise da metodologia do conteúdo, verificando:    
    - A fundamentação teórica e justificativa para os métodos utilizados; 
    - A clareza, coerência e replicabilidade dos procedimentos descritos;  
    - Possíveis lacunas metodológicas ou pressuposições não explicitadas.
  expected_output: >
    Um texto estruturado abordando:
    1. Descrição e Avaliação dos Métodos Utilizados:
      - Explicação dos métodos aplicados e sua fundamentação teórica;
      - Avaliação da clareza na descrição dos procedimentos;
      - Verificação da coerência e replicabilidade.
    2. Identificação de Lacunas e Pressupostos:
      - Análise de possíveis inconsistências na metodologia;
      - Identificação de pressupostos metodológicos não explicitados.
  agent: critical_analyst

results_analysis:
  description: >
    Analise as chunks {chunk_indexes} do batch {batch_number} do documento {target_document} (tema: {theme}). 
    O documento é do tipo <type>'draft'</type>.
    Avalie os resultados apresentados, considerando:
    
    - A consistência dos dados obtidos em relação aos objetivos e metodologia empregada;
    - A coerência das conclusões com base nas evidências apresentadas;
    - A presença de possíveis inconsistências, referências ausentes ou lacunas interpretativas.
  expected_output: >
  context: [methodology_analysis]
  agent: critical_analyst

elements_extraction:
  description: >
    Extraia dados estruturados e elementos técnicos das chunks {chunk_indexes} (batch {batch_number}) do documento {target_document}, 
    seguindo regras rigorosas de formatação e padronização. O documento é do tipo <type>'draft'</type>
    Você deve coletar informações brutas e neutras (sem análise crítica) para posterior síntese, de elementos técnicos e dados chaves, 
    garantindo integridade e compatibilidade entre batches.

    **Ações Obrigatórias**:
    1. **Extrair Elementos Técnicos**:
       - **Tabelas**: Converter para HTML válido, mantendo cabeçalhos e dados brutos.
         - Exemplo: <table><tr><th>ID</th><th>Valor</th></tr><tr><td>1</td><td>42</td></tr></table>
       - **Equações**: Transcrever em LaTeX com contexto mínimo (ex: `E = mc^2`).
       - **Códigos**: Extrair trechos completos, indicando a linguagem (ex: ```python\nprint("Hello World")```).
       - **Gráficos/Imagens**: Registrar nome do arquivo, descrição textual e chunk de origem.

    2. **Coletar Dados Chave**:
       - **Resultados Numéricos**: Extrair valores, métricas e unidades explicitamente declarados (ex: "Eficiência: 85% ± 2%").
       - **Termos Técnicos**: Listar definições explícitas (ex: "Definição: 'Otimização Z' refere-se a...").
       - **Relações Declaradas**: Capturar conexões explícitas entre conceitos (ex: "Variável X correlacionada com Y (r=0.7)").

    3. **Metadados Contextuais**:
       - Registrar índices das chunks associadas a cada elemento.
       - Marcar termos/conceitos repetidos no batch (ex: "Termo 'Fator K' mencionado 5x").
  expected_output: >
    Um relatório do batch, identificando documento e batch de chunk, formatado em markdown, com uma seção apresentando os dados 
    chave encontrados e coletados, e outra contento: tabelas formatadas em HTML e funcional, trechos de código, equações e expressoes 
    matematicas, e figuras e gráficos, se encontrados no conteudo das chunks. Caso não, informar isso.
  agent: technical_data_extractor

critical_report_writing:
  description: >
    Utilize as analises realizadas para nas tarefas anteriores para escrever um relatório crítico do conteúdo do batch.
  expected_output:>
  context: [critical_analysis, methodology_analysis]